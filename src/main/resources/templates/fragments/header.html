<div th:fragment="mainHeader" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <style>
        .topbar {  position: absolute;top: 0;width: 100%;left: 0;display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:0.7rem 0; background:#ffffff; border-bottom:1px solid #eef1f4; box-shadow:0 1px 3px rgba(15,23,42,0.04); }
        .brand { font-weight:600; color:#0b5fff; text-decoration:none; }
        .nav-actions { display:flex; gap:.6rem; align-items:center; }
        .btn { display:inline-block; padding:.45rem .8rem; border-radius:6px; border:1px solid #dfe6ef; background:#f8fafc; color:#0b5fff; text-decoration:none; font-size:.95rem; }
        .btn.primary { background:#0b5fff; color:white; border-color:#0b5fff; }
        .btn.ghost { background:transparent; border-color:transparent; color:#0b5fff; }
        .page-container { max-width:900px; margin:2rem auto; padding:1rem; }
        .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
        @media (max-width:600px){ .topbar{padding:.6rem} .page-container{margin:1rem} }
    </style>
    <header class="topbar">
        <a th:href="@{/}" class="brand" style="display:flex;align-items:center;gap:.5rem;">
            <svg width="24" height="24" viewBox="0 0 24 24" aria-label="Identity Server" role="img"
                 xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                <path d="M12 2l7 3v6c0 5.2-3.7 9.4-7 11-3.3-1.6-7-5.8-7-11V5l7-3z"/>
                <circle cx="12" cy="10" r="2.5" fill="#fff"/>
                <path d="M8.8 15.2c0-1.9 2.1-3 3.2-3s3.2 1.1 3.2 3v.3c-1.1.9-2.3 1.7-3.2 2.2-.9-.5-2.1-1.3-3.2-2.2v-.3z" fill="#fff"/>
            </svg>
            <span>auth.massine.org</span>
        </a>

        <nav class="nav-actions">
            <a th:href="@{/}" class="btn">Accueil</a>
            <a href="javascript:history.back()" class="btn">Retour</a>

            <a sec:authorize="hasAuthority('ADMIN') or hasAuthority('ROLE_ADMIN')"
               th:href="@{/clients}"
               class="btn primary">Gérer les clients</a>

            <span sec:authorize="isAuthenticated()">
                <form th:action="@{/logout}" method="post" style="display:inline; margin:0;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button type="submit" class="btn ghost">Déconnexion</button>
                </form>
            </span>

            <a sec:authorize="!isAuthenticated()" th:href="@{/login}" class="btn">Se connecter</a>
        </nav>
    </header>
</div>
