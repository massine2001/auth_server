<div th:fragment="mainHeader" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <style>
        :root{
            --primary:#0d6efd;
            --primary-600:#0b5ed7;
            --bg:#ffffff;
            --border:#eef1f4;
            --text:#0f172a;
            --muted:#6b7280;
            --shadow-soft:0 1px 3px rgba(15,23,42,0.04);
            --radius:10px;
        }

        .topbar{
            position:absolute;
            top:0;
            left:0;
            width:100%;
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:1rem;
            padding:.8rem 1rem;
            background:var(--bg);
            border-bottom:1px solid var(--border);
            box-shadow:var(--shadow-soft);
            z-index:50;
        }

        .brand{
            display:flex;
            align-items:center;
            gap:.5rem;
            font-weight:600;
            color:var(--primary);
            text-decoration:none;
            font-size:1rem;
        }
        .brand:hover{text-decoration:underline}

        .nav-actions{
            display:flex;
            gap:.6rem;
            align-items:center;
            flex-wrap:wrap;
        }

        .btn{
            display:inline-flex;
            align-items:center;
            justify-content:center;
            padding:.45rem .9rem;
            border-radius:var(--radius);
            border:1px solid #dfe6ef;
            background:#f8fafc;
            color:var(--primary);
            text-decoration:none;
            font-size:.95rem;
            font-weight:500;
            transition:background .15s ease,border-color .15s ease,color .15s ease;
            cursor:pointer;
        }
        .btn:hover{
            background:#eef2ff;
            border-color:#c7d2fe;
        }
        .btn.primary{
            background:var(--primary);
            color:#fff;
            border-color:var(--primary);
        }
        .btn.primary:hover{
            background:var(--primary-600);
            border-color:var(--primary-600);
        }
        .btn.ghost{
            background:transparent;
            border-color:transparent;
            color:var(--primary);
        }
        .btn.ghost:hover{
            background:rgba(13,110,253,0.08);
        }

        .page-container{
            max-width:900px;
            margin:2rem auto;
            padding:1rem;
        }

        .sr-only{
            position:absolute;
            width:1px;
            height:1px;
            padding:0;
            margin:-1px;
            overflow:hidden;
            clip:rect(0,0,0,0);
            white-space:nowrap;
            border:0;
        }

        @media(max-width:600px){
            .topbar{flex-wrap:wrap;justify-content:center;gap:.4rem;padding:.6rem;}
            .brand span{display:none;}
            .btn{padding:.4rem .7rem;font-size:.9rem;}
        }

        button.btn{
            background:#f8fafc;
            border:1px solid #dfe6ef;
        }
        button.btn:hover{
            background:#eef2ff;
        }
    </style>

    <header class="topbar">
        <a th:href="@{/}" class="brand">
            <svg width="24" height="24" viewBox="0 0 24 24" aria-label="Identity Server" role="img"
                 xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                <path d="M12 2l7 3v6c0 5.2-3.7 9.4-7 11-3.3-1.6-7-5.8-7-11V5l7-3z"/>
                <circle cx="12" cy="10" r="2.5" fill="#fff"/>
                <path d="M8.8 15.2c0-1.9 2.1-3 3.2-3s3.2 1.1 3.2 3v.3c-1.1.9-2.3 1.7-3.2 2.2-.9-.5-2.1-1.3-3.2-2.2v-.3z" fill="#fff"/>
            </svg>
            <span>auth.massine.org</span>
        </a>

        <nav class="nav-actions">
            <a th:href="@{/}" class="btn">Accueil</a>
            <a href="javascript:history.back()" class="btn">Retour</a>

            <a sec:authorize="hasAuthority('ADMIN') or hasAuthority('ROLE_ADMIN')"
               th:href="@{/clients}"
               class="btn primary">Gérer les clients</a>

            <span sec:authorize="isAuthenticated()">
        <form th:action="@{/logout}" method="post" style="display:inline; margin:0;">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <button type="submit" class="btn ghost">Déconnexion</button>
        </form>
      </span>

            <a sec:authorize="!isAuthenticated()" th:href="@{/login}" class="btn">Se connecter</a>
        </nav>
    </header>
</div>
